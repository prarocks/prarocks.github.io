<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics (keeps your original ID) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9XKFFPFVCT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);} 
      gtag('js', new Date());
      gtag('config', 'G-9XKFFPFVCT');
    </script>
    <!-- End Google Analytics -->

    <meta charset="UTF-8">">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Prasanna Dahal's Portfolio - Civil Engineer specializing in Water Resources and Remote Sensing">
    <title>Prasanna Dahal — Water Resources & Remote Sensing</title>

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;1,400&family=Poppins:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header class="site-header">
        <nav class="sticky-nav" aria-label="Primary navigation">
            <div class="nav-container">
                <a class="logo" href="#">Prasanna Dahal</a>

                <button class="menu-toggle" aria-expanded="false" aria-controls="primary-menu">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                    <span class="visually-hidden">Toggle navigation</span>
                </button>

                <ul id="primary-menu" class="nav-links" role="menu">
                    <li role="none"><a role="menuitem" href="#about">About</a></li>
                    <li role="none"><a role="menuitem" href="#skills">Skills</a></li>
                    <li role="none"><a role="menuitem" href="#education">Education</a></li>
                    <li role="none"><a role="menuitem" href="#works">Works</a></li>
                    <li role="none"><a role="menuitem" href="#contact">Contact</a></li>
                </ul>

                <div class="nav-actions">
                    <button id="theme-toggle" class="icon-btn" aria-pressed="false" title="Toggle dark mode">
                        <i class="far fa-moon"></i>
                        <span class="visually-hidden">Toggle theme</span>
                    </button>
                </div>
            </div>
        </nav>

        <div class="hero-header">
            <div class="hero-inner">
                <img src="images/mypicture.jpg" alt="Prasanna Dahal portrait" class="profile-photo" loading="lazy">
                <div class="hero-copy">
                    <h1>Prasanna Dahal</h1>
                    <p class="subtitle">Civil Engineer • Water Resources & Remote Sensing</p>
                    <p class="lead">I build data-driven hydrology tools — watershed modeling, drought assessment, and remote sensing solutions to make water management smarter and more resilient across South Asia.</p>

                    <div class="social-links">
                        <a href="https://github.com/prarocks" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><i class="fab fa-github"></i></a>
                        <a href="https://www.linkedin.com/in/prasanna-dahal-2b2744238/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                        <a href="mailto:prasanna1dahal@gmail.com" aria-label="Email"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section id="about" class="card fade-in" tabindex="-1">
            <h2>About Me</h2>
            <p>I am a civil engineer specializing in water resources, with expertise in watershed modeling, drought assessment, and remote sensing for agricultural and hydrological applications. Passionate about addressing climate-driven water challenges in South Asia, I aim to advance sustainable water management through data-driven hydrological modeling and machine learning in graduate studies. My work integrates tools like SWAT+, Google Earth Engine, and AquaCrop to tackle pressing issues like irrigation sustainability and drought prediction.</p>
        </section>

        <section id="skills" class="card fade-in">
            <h2>Skills</h2>
            <div class="skills-grid">
                <div class="skill-badge"><i class="fas fa-water" aria-hidden="true"></i><span>SWAT / SWAT+</span></div>
                <div class="skill-badge"><i class="fab fa-google" aria-hidden="true"></i><span>Google Earth Engine</span></div>
                <div class="skill-badge"><i class="fas fa-leaf" aria-hidden="true"></i><span>AquaCrop</span></div>
                <div class="skill-badge"><i class="fab fa-python" aria-hidden="true"></i><span>Python</span></div>
                <div class="skill-badge"><i class="fab fa-r-project" aria-hidden="true"></i><span>R</span></div>
                <div class="skill-badge"><i class="fas fa-drafting-compass" aria-hidden="true"></i><span>AutoCAD</span></div>
                <div class="skill-badge"><i class="fas fa-chart-line" aria-hidden="true"></i><span>Time Series Analysis</span></div>
                <div class="skill-badge"><i class="fas fa-satellite" aria-hidden="true"></i><span>Remote Sensing & GIS</span></div>
                <div class="skill-badge"><i class="fas fa-brain" aria-hidden="true"></i><span>Machine Learning</span></div>
            </div>
        </section>

        <section id="education" class="card fade-in">
            <h2>Education & Experience</h2>
            <div class="timeline">
                <article class="timeline-item">
                    <h3>Bachelor of Civil Engineering</h3>
                    <p>IOE, Pulchowk Campus — April 2021 – April 2025 (Student)</p>
                    <p><strong>Merit Based Scholarship</strong></p>
                </article>
                <article class="timeline-item">
                    <h3>Research Assistant</h3>
                    <p>Dr. Suraj Lamichhane, IOE — October 2024 – April 2025</p>
                </article>
                <article class="timeline-item">
                    <h3>Research Intern</h3>
                    <p>Center for Water Resource Studies, IOE — April 2025 – Present</p>
                </article>
            </div>
        </section>

        <section id="works" class="card fade-in">
            <h2>Research Projects</h2>
            <div class="works-grid">
                <!-- Card 1 -->
                <article class="work-card">
                    <img src="images/PDIR1.png" alt="PDIR Product Bias Correction" class="work-image" loading="lazy">
                    <div class="work-body">
                        <h3>PDIR Product Bias Correction</h3>
                        <p>Collaborated with Dr. Kuo-Lin-Hsu (UC Irvine) to enhance PDIR satellite precipitation data.</p>
                        <ul>
                            <li>Used machine learning and topographic variables (slope, aspect, elevation).</li>
                            <li>Compared PDIR pixel values with gauge observations.</li>
                            <li>Improved accuracy for light and medium precipitation; high-intensity events remain challenging.</li>
                        </ul>
                        <a class="read-more" href="projects/pdir-bias-correction.html">Read more</a>
                    </div>
                </article>

                <!-- Card 2 -->
                <article class="work-card">
                    <img src="images/kankai.png" alt="Watershed Modelling" class="work-image" loading="lazy">
                    <div class="work-body">
                        <h3>Watershed Modelling for Irrigation Sustainability</h3>
                        <p>Assessed irrigation sustainability in Kankai and Rapti basins using SWAT and climate scenarios.</p>
                        <a class="read-more" href="projects/watershed-modelling.html">Read more</a>
                    </div>
                </article>

                <!-- Card 3 -->
                <article class="work-card">
                    <img src="images/Mahakali.png" alt="Drought Analysis" class="work-image" loading="lazy">
                    <div class="work-body">
                        <h3>Drought Analysis and Agricultural Water Needs</h3>
                        <p>Studied meteorological drought impacts on Net Irrigation Water Requirement (NIWR).</p>
                        <a class="read-more" href="projects/drought-analysis.html">Read more</a>
                    </div>
                </article>

                <!-- Card 4 -->
                <article class="work-card">
                    <img src="images/NIWR_SPEI3_monsoon_separate.png" alt="Seasonal NIWR Prediction" class="work-image" loading="lazy">
                    <div class="work-body">
                        <h3>Seasonal NIWR Prediction Using Satellite Data</h3>
                        <p>Model for crop NIWR in Chitwan using AquaCrop and MODIS-derived indices.</p>
                        <a class="read-more" href="projects/niwr-prediction.html">Read more</a>
                    </div>
                </article>
            </div>

            <!-- Modal (hidden by default) -->
            <div id="imageModal" class="modal" aria-hidden="true" role="dialog" aria-label="Image preview">
                <button class="modal-close" aria-label="Close image">&times;</button>
                <img id="modalImage" class="modal-content" src="" alt="Expanded project image">
            </div>
        </section>

        <section id="contact" class="card fade-in">
            <h2>Get in Touch</h2>
            <form id="contact-form" class="contact-form" action="https://formspree.io/f/xyzdaywj" method="POST" novalidate>
                <label for="name">Name</label>
                <input id="name" name="name" type="text" required>

                <label for="email">Email</label>
                <input id="email" name="email" type="email" required>

                <label for="message">Message</label>
                <textarea id="message" name="message" rows="6" required></textarea>

                <button id="submit-button" type="submit">Send</button>

                <div id="form-status" role="status" aria-live="polite"></div>
            </form>

            <div class="contact-links">
                <p>Email: <a href="mailto:prasanna1dahal@gmail.com">prasanna1dahal@gmail.com</a></p>
                <p>
                    <a href="https://github.com/prarocks" target="_blank" rel="noopener noreferrer">GitHub</a>
                    &nbsp;|&nbsp;
                    <a href="https://www.linkedin.com/in/prasanna-dahal-2b2744238/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                </p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Prasanna Dahal — Built with curiosity and data</p>
    </footer>

    <button id="back-to-top" aria-label="Back to top"><i class="fas fa-arrow-up"></i></button>

    <!-- Scripts (deferred for performance) -->
    <script defer>
    (function(){
        // Utilities
        const $ = sel => document.querySelector(sel);
        const $$ = sel => Array.from(document.querySelectorAll(sel));

        // Mobile menu toggle
        const menuToggle = $('.menu-toggle');
        const primaryMenu = $('#primary-menu');
        menuToggle && menuToggle.addEventListener('click', () => {
            const expanded = menuToggle.getAttribute('aria-expanded') === 'true';
            menuToggle.setAttribute('aria-expanded', String(!expanded));
            primaryMenu.classList.toggle('active');
        });

        // Theme toggle (persist in localStorage)
        const themeToggle = $('#theme-toggle');
        const root = document.documentElement;
        const currentTheme = localStorage.getItem('theme') || 'light';
        root.setAttribute('data-theme', currentTheme);
        if(themeToggle){
            themeToggle.addEventListener('click', () => {
                const next = root.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
                root.setAttribute('data-theme', next);
                themeToggle.setAttribute('aria-pressed', String(next === 'dark'));
                localStorage.setItem('theme', next);
            });
        }

        // Back to top
        const backToTop = $('#back-to-top');
        window.addEventListener('scroll', () => {
            if(window.pageYOffset > 350) backToTop.classList.add('show'); else backToTop.classList.remove('show');

            // sticky nav scrolled state
            const nav = document.querySelector('.sticky-nav');
            if(window.pageYOffset > 50) nav.classList.add('scrolled'); else nav.classList.remove('scrolled');
        });
        backToTop && backToTop.addEventListener('click', () => window.scrollTo({top: 0, behavior: 'smooth'}));

        // Intersection Observer for fade-in
        const fadeElements = $$('.fade-in');
        if('IntersectionObserver' in window){
            const io = new IntersectionObserver(entries => {
                entries.forEach(e => e.isIntersecting && e.target.classList.add('visible'));
            }, {threshold: 0.12});
            fadeElements.forEach(el => io.observe(el));
        } else { fadeElements.forEach(el => el.classList.add('visible')); }

        // Modal image preview
        const modal = $('#imageModal');
        const modalImg = $('#modalImage');
        const modalClose = modal && modal.querySelector('.modal-close');
        $$('.work-image').forEach(img => {
            img.addEventListener('click', () => {
                modal.classList.add('active');
                modal.setAttribute('aria-hidden','false');
                modalImg.src = img.src;
                document.body.style.overflow = 'hidden';
            });
        });
        modalClose && modalClose.addEventListener('click', closeModal);
        modal && modal.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });
        function closeModal(){ modal.classList.remove('active'); modal.setAttribute('aria-hidden','true'); modalImg.src = ''; document.body.style.overflow = ''; }

        // Image keyboard close
        document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeModal(); });

        // Smooth scrolling for internal links
        $$('a[href^="#"]').forEach(a => {
            a.addEventListener('click', (e)=>{
                const href = a.getAttribute('href');
                if(href.length > 1){
                    e.preventDefault();
                    const el = document.querySelector(href);
                    el && el.scrollIntoView({behavior:'smooth', block:'start'});
                    // close mobile menu
                    primaryMenu.classList.remove('active');
                    menuToggle && menuToggle.setAttribute('aria-expanded', 'false');
                }
            });
        });

        // Contact form submission using Formspree (AJAX) — preserves your form action
        const form = $('#contact-form');
        const submitBtn = $('#submit-button');
        const status = $('#form-status');
        if(form){
            form.addEventListener('submit', async function(ev){
                ev.preventDefault();
                submitBtn.disabled = true;
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Sending...';
                status.textContent = '';

                try{
                    const res = await fetch(form.action, {
                        method: form.method,
                        body: new FormData(form),
                        headers: { 'Accept': 'application/json' }
                    });

                    if(res.ok){
                        submitBtn.textContent = 'Sent ✓';
                        status.textContent = 'Thanks! Your message has been sent.';
                        form.reset();
                        setTimeout(()=>{ submitBtn.textContent = originalText; submitBtn.disabled = false; status.textContent = ''; }, 15000);
                    } else {
                        const data = await res.json().catch(()=>null);
                        submitBtn.textContent = 'Error';
                        status.textContent = data && data.error ? data.error : 'There was an error sending your message.';
                        setTimeout(()=>{ submitBtn.textContent = originalText; submitBtn.disabled = false; }, 2500);
                    }
                } catch(err){
                    submitBtn.textContent = 'Error';
                    status.textContent = 'Network error — please try again later.';
                    setTimeout(()=>{ submitBtn.textContent = originalText; submitBtn.disabled = false; }, 2500);
                }
            });
        }

    })();
    </script>
</body>
</html>
